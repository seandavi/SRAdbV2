<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using the SRAdbV2 Package • SRAdbV2</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using the SRAdbV2 Package">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-93043521-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-93043521-1');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SRAdbV2</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.7.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/SRAdbv2.html">Using the SRAdbV2 Package</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Using the SRAdbV2 Package</h1>
                        <h4 class="author">Sean Davis</h4>
            <address class="author_afil">
      Center for Cancer Research, National Cancer Institute, NIH, Bethesda, MD USA<br><a class="author_email" href="mailto:#"></a><a href="mailto:seandavi@gmail.com">seandavi@gmail.com</a>
      </address>
                  
      
      
      <div class="hidden name"><code>SRAdbv2.Rmd</code></div>

    </div>

    
    
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function() {
  document.querySelector("h1").className = "title";
});
</script><script type="text/javascript">
document.addEventListener("DOMContentLoaded", function() {
  var links = document.links;  
  for (var i = 0, linksLength = links.length; i < linksLength; i++)
    if (links[i].hostname != window.location.hostname)
      links[i].target = '_blank';
});
</script><div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
</div>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<p>The SRAdbV2 package is currently available from <a href="https://github.com/seandavi/SRAdbV2">GitHub</a> and is under active development. Either the <em><a href="https://CRAN.R-project.org/package=devtools">devtools</a></em> package or the <em><a href="https://CRAN.R-project.org/package=BiocManager">BiocManager</a></em> package can be used for easy installation.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">'BiocManager'</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">BiocManager<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/BiocManager/topics/install">install</a></span>(<span class="st">'seandavi/SRAdbV2'</span>)</a></code></pre></div>
</div>
<div id="usage" class="section level1">
<h1 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h1>
<div id="loading-the-library" class="section level2">
<h2 class="hasAnchor">
<a href="#loading-the-library" class="anchor"></a>Loading the library</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">library</span>(SRAdbV2)</a></code></pre></div>
<pre><code>## Loading required package: R6</code></pre>
</div>
<div id="the-omicidx" class="section level2">
<h2 class="hasAnchor">
<a href="#the-omicidx" class="anchor"></a>The Omicidx</h2>
<p>The entrypoint for using the SRAdbV2 system is the <code>Omicidx</code>, an <a href="https://cran.r-project.org/web/packages/R6/vignettes/Introduction.html">R6 class</a>. To start, create a new instance of the class.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">oidx =<span class="st"> </span>Omicidx<span class="op">$</span><span class="kw">new</span>()</a></code></pre></div>
<p>Typing <code>oidx$</code> and then <code>TAB</code> will give possible completions. Note the “search” completion.</p>
</div>
<div id="queries" class="section level2">
<h2 class="hasAnchor">
<a href="#queries" class="anchor"></a>Queries</h2>
<p>Once an instance of <code>Omicidx</code> is created (here we will call the instance <code>oidx</code>), search capabilities are available via <code>oidx$search()</code>. The one interesting parameter is the <code>q</code> parameter. This parameter takes a string formatted as a Lucene query string. See below for <a href="#query-syntax">Query syntax</a>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">query=<span class="kw">paste</span>(</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">  <span class="kw">paste0</span>(<span class="st">'sample.taxon_id:'</span>, <span class="dv">10116</span>),</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">  <span class="st">'AND experiment.library_strategy:"rna seq"'</span>,</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">  <span class="st">'AND experiment.library_source:transcriptomic'</span>,</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">  <span class="st">'AND experiment.platform:illumina'</span>)</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">z =<span class="st"> </span>oidx<span class="op">$</span><span class="kw">search</span>(<span class="dt">q=</span>query,<span class="dt">entity=</span><span class="st">'full'</span>,<span class="dt">size=</span>100L)</a></code></pre></div>
<p>The <code>entity</code> parameter is one of the SRA entity types available via the API. The <code>size</code> parameter is the number of records that will be returned in each “chunk”.</p>
</div>
<div id="fetching-results" class="section level2">
<h2 class="hasAnchor">
<a href="#fetching-results" class="anchor"></a>Fetching results</h2>
<p>Because result sets can be large, we have a special method that allows us to “scroll” through the results or to simply get them <em>en bloc</em>. The first step for result retrieval, then, is to get a <code>Scroller</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">s =<span class="st"> </span>z<span class="op">$</span><span class="kw">scroll</span>()</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">s</a></code></pre></div>
<pre><code>## &lt;Scroller&gt;
##   Public:
##     clone: function (deep = FALSE) 
##     collate: function (limit = Inf) 
##     count: active binding
##     fetched: active binding
##     has_next: function () 
##     initialize: function (search, progress = interactive()) 
##     reset: function () 
##     yield: function () 
##   Private:
##     .count: NULL
##     .fetched: 0
##     .last: FALSE
##     progress: FALSE
##     scroll: 1m
##     scroll_id: NULL
##     search: Searcher, R6</code></pre>
<p>Methods such as <code>s$count</code> allow introspection into the available number of results, in this case, 10221 records.</p>
<p>The <code>Scroller</code> provides two different approaches to accessing the resulting data.</p>
<div id="collating-entire-result-sets" class="section level3">
<h3 class="hasAnchor">
<a href="#collating-entire-result-sets" class="anchor"></a>Collating entire result sets</h3>
<p>The first approach to getting results of a query back into R is the most convenient, but for large result sets, the entire dataset is loaded into memory and may take significant time if network connections are slow.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co"># for VERY large result sets, this may take</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co"># quite a bit of time and/or memory. An</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co"># alternative is to use s$chunk() to retrieve</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co"># one batch of records at a time and process</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co"># incrementally.</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6">res =<span class="st"> </span>s<span class="op">$</span><span class="kw">collate</span>(<span class="dt">limit =</span> <span class="dv">1000</span>)</a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="kw">head</span>(res)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 83
##   experiment.Insdc experiment.LastMet… experiment.LastUpd…
##   &lt;lgl&gt;            &lt;dttm&gt;              &lt;dttm&gt;             
## 1 TRUE             2013-09-23 16:45:14 2013-09-23 16:45:14
## 2 TRUE             2013-09-23 16:45:14 2013-09-23 16:45:14
## 3 TRUE             2017-09-24 06:21:35 2017-09-28 08:48:29
## 4 TRUE             2017-09-24 06:21:34 2017-09-28 08:43:12
## 5 TRUE             2017-09-24 06:21:37 2017-09-28 08:55:15
## 6 TRUE             2017-09-24 06:21:36 2017-09-28 08:50:14
## # ... with 80 more variables: experiment.Published &lt;dttm&gt;,
## #   experiment.Received &lt;dttm&gt;, experiment.Status &lt;chr&gt;,
## #   experiment.accession &lt;chr&gt;, experiment.alias &lt;chr&gt;,
## #   experiment.attributes &lt;list&gt;, experiment.center_name &lt;chr&gt;,
## #   experiment.experiment_accession &lt;chr&gt;, experiment.identifiers &lt;list&gt;,
## #   experiment.instrument_model &lt;chr&gt;, experiment.library_layout &lt;chr&gt;,
## #   experiment.library_name &lt;chr&gt;, experiment.library_selection &lt;chr&gt;,
## #   experiment.library_source &lt;chr&gt;, experiment.library_strategy &lt;chr&gt;,
## #   experiment.platform &lt;chr&gt;, experiment.sample_accession &lt;chr&gt;,
## #   experiment.study_accession &lt;chr&gt;, experiment.title &lt;chr&gt;,
## #   experiment.xrefs &lt;list&gt;, experiment.broker_name &lt;chr&gt;,
## #   experiment.design &lt;chr&gt;,
## #   experiment.library_construction_protocol &lt;chr&gt;,
## #   experiment.library_layout_length &lt;dbl&gt;,
## #   experiment.library_layout_sdev &lt;chr&gt;, sample.BioSample &lt;chr&gt;,
## #   sample.GEO &lt;chr&gt;, sample.Insdc &lt;lgl&gt;, sample.LastMetaUpdate &lt;dttm&gt;,
## #   sample.LastUpdate &lt;dttm&gt;, sample.Published &lt;dttm&gt;,
## #   sample.Received &lt;dttm&gt;, sample.Status &lt;chr&gt;, sample.accession &lt;chr&gt;,
## #   sample.alias &lt;chr&gt;, sample.attributes &lt;list&gt;,
## #   sample.center_name &lt;chr&gt;, sample.identifiers &lt;list&gt;,
## #   sample.organism &lt;chr&gt;, sample.taxon_id &lt;int&gt;, sample.title &lt;chr&gt;,
## #   sample.xrefs &lt;list&gt;, sample.description &lt;chr&gt;, study.BioProject &lt;chr&gt;,
## #   study.GEO &lt;chr&gt;, study.Insdc &lt;lgl&gt;, study.LastMetaUpdate &lt;dttm&gt;,
## #   study.LastUpdate &lt;dttm&gt;, study.Published &lt;dttm&gt;,
## #   study.Received &lt;dttm&gt;, study.Status &lt;chr&gt;, study.abstract &lt;chr&gt;,
## #   study.accession &lt;chr&gt;, study.alias &lt;chr&gt;, study.center_name &lt;chr&gt;,
## #   study.identifiers &lt;list&gt;, study.study_accession &lt;chr&gt;,
## #   study.study_type &lt;chr&gt;, study.title &lt;chr&gt;, study.attributes &lt;list&gt;,
## #   study.broker_name &lt;chr&gt;, study.description &lt;chr&gt;, study.xrefs &lt;list&gt;,
## #   Insdc &lt;lgl&gt;, LastMetaUpdate &lt;dttm&gt;, LastUpdate &lt;dttm&gt;,
## #   Published &lt;dttm&gt;, Received &lt;dttm&gt;, Status &lt;chr&gt;, accession &lt;chr&gt;,
## #   alias &lt;chr&gt;, attributes &lt;list&gt;, center_name &lt;chr&gt;, identifiers &lt;list&gt;,
## #   reads &lt;list&gt;, spot_length &lt;int&gt;, broker_name &lt;chr&gt;, run_center &lt;chr&gt;,
## #   nreads &lt;int&gt;, sample.broker_name &lt;chr&gt;</code></pre>
<p>Note that the scroller now reports that it has fetched (<code>s$fetched</code>) 1000 records.</p>
<p>To reuse a <code>Scroller</code>, we must reset it first.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">s<span class="op">$</span><span class="kw">reset</span>()</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">s</a></code></pre></div>
<pre><code>## &lt;Scroller&gt;
##   Public:
##     clone: function (deep = FALSE) 
##     collate: function (limit = Inf) 
##     count: active binding
##     fetched: active binding
##     has_next: function () 
##     initialize: function (search, progress = interactive()) 
##     reset: function () 
##     yield: function () 
##   Private:
##     .count: 10221
##     .fetched: 0
##     .last: FALSE
##     progress: FALSE
##     scroll: 1m
##     scroll_id: NULL
##     search: Searcher, R6</code></pre>
</div>
<div id="yielding-chunks" class="section level3">
<h3 class="hasAnchor">
<a href="#yielding-chunks" class="anchor"></a>Yielding chunks</h3>
<p>The second approach is to iterate through results using the <code>yield</code> method. This approach allows the user to perform processing on chunks of data as they arrive in R.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">j =<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2">## fetch only 500 records, but</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">## `yield` will return NULL</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">## after ALL records have been fetched</a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="cf">while</span>(s<span class="op">$</span>fetched <span class="op">&lt;</span><span class="st"> </span><span class="dv">500</span>) {</a>
<a class="sourceLine" id="cb12-6" data-line-number="6">    res =<span class="st"> </span>s<span class="op">$</span><span class="kw">yield</span>()</a>
<a class="sourceLine" id="cb12-7" data-line-number="7">    <span class="co"># do something interesting with `res` here if you like</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8">    j =<span class="st"> </span>j <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9">    <span class="kw">message</span>(<span class="kw">sprintf</span>(<span class="st">'total of %d fetched records, loop iteration # %d'</span>, s<span class="op">$</span>fetched, j))</a>
<a class="sourceLine" id="cb12-10" data-line-number="10">}</a></code></pre></div>
<pre><code>## total of 100 fetched records, loop iteration # 1</code></pre>
<pre><code>## total of 200 fetched records, loop iteration # 2</code></pre>
<pre><code>## total of 300 fetched records, loop iteration # 3</code></pre>
<pre><code>## total of 400 fetched records, loop iteration # 4</code></pre>
<pre><code>## total of 500 fetched records, loop iteration # 5</code></pre>
<p>The <code>Scroller</code> also has a <code>has_next()</code> method that will report <code>TRUE</code> if the result set has not been fully fetched. Using the <code>reset()</code> method will move the cursor back to the beginning of the result set.</p>
</div>
</div>
</div>
<div id="query-syntax" class="section level1">
<h1 class="hasAnchor">
<a href="#query-syntax" class="anchor"></a>Query syntax</h1>
<div id="terms" class="section level2">
<h2 class="hasAnchor">
<a href="#terms" class="anchor"></a>Terms</h2>
<p>A query is broken up into terms and operators. There are two types of terms: Single Terms and Phrases. A Single Term is a single word such as “test” or “hello”. A Phrase is a group of words surrounded by double quotes such as “hello dolly”. Multiple terms can be combined together with Boolean operators to form a more complex query (see below).</p>
</div>
<div id="fields" class="section level2">
<h2 class="hasAnchor">
<a href="#fields" class="anchor"></a>Fields</h2>
<p>Queries support fielded data. When performing a search you can either specify a field, or use the default field. The field names and default field is implementation specific. You can search any field by typing the field name followed by a colon “:” and then the term you are looking for. As an example, let’s assume a Lucene index contains two fields, title and abstract. If you want to find the document entitled “The Right Way” which contains the text “don’t go this way” in the abstract, you can enter:</p>
<pre><code>title:"The Right Way" AND abstract:go</code></pre>
<p>or</p>
<p>Note: The field is only valid for the term that it directly precedes, so the query</p>
<pre><code>title:Do it right</code></pre>
<p>will only find “Do” in the title field. It will find “it” and “right” in any other fields.</p>
</div>
<div id="wildcard-searches" class="section level2">
<h2 class="hasAnchor">
<a href="#wildcard-searches" class="anchor"></a>Wildcard Searches</h2>
<p>Lucene supports single and multiple character wildcard searches within single terms (not within phrase queries). To perform a single character wildcard search use the “?” symbol. To perform a multiple character wildcard search use the “*" symbol. The single character wildcard search looks for terms that match that with the single character replaced. For example, to search for “text” or “test” you can use the search:</p>
<pre><code>te?t</code></pre>
<p>Multiple character wildcard searches looks for 0 or more characters. For example, to search for test, tests or tester, you can use the search:</p>
<pre><code>test*</code></pre>
<p>You can also use the wildcard searches in the middle of a term.</p>
<pre><code>te*t</code></pre>
<p>Note: You cannot use a * or ? symbol as the first character of a search.</p>
</div>
<div id="fuzzy-searches" class="section level2">
<h2 class="hasAnchor">
<a href="#fuzzy-searches" class="anchor"></a>Fuzzy Searches</h2>
<p>Lucene supports fuzzy searches based on the Levenshtein Distance, or Edit Distance algorithm. To do a fuzzy search use the tilde, “~”, symbol at the end of a Single word Term. For example to search for a term similar in spelling to “roam” use the fuzzy search:</p>
<pre><code>roam~</code></pre>
<p>This search will find terms like foam and roams.</p>
<p>Starting with Lucene 1.9 an additional (optional) parameter can specify the required similarity. The value is between 0 and 1, with a value closer to 1 only terms with a higher similarity will be matched. For example:</p>
<pre><code>roam~0.8</code></pre>
<p>The default that is used if the parameter is not given is 0.5.</p>
</div>
<div id="proximity-searches" class="section level2">
<h2 class="hasAnchor">
<a href="#proximity-searches" class="anchor"></a>Proximity Searches</h2>
<p>Lucene supports finding words are a within a specific distance away. To do a proximity search use the tilde, “~”, symbol at the end of a Phrase. For example to search for a “apache” and “jakarta” within 10 words of each other in a document use the search:</p>
<pre><code>"jakarta apache"~10</code></pre>
</div>
<div id="range-searches" class="section level2">
<h2 class="hasAnchor">
<a href="#range-searches" class="anchor"></a>Range Searches</h2>
<p>Range Queries allow one to match documents whose field(s) values are between the lower and upper bound specified by the Range Query. Range Queries can be inclusive or exclusive of the upper and lower bounds. Sorting is done lexicographically.</p>
<pre><code>mod_date:[20020101 TO 20030101]</code></pre>
<p>This will find documents whose mod_date fields have values between 20020101 and 20030101, inclusive. Note that Range Queries are not reserved for date fields. You could also use range queries with non-date fields:</p>
<pre><code>title:{Aida TO Carmen}</code></pre>
<p>This will find all documents whose titles are between Aida and Carmen, but not including Aida and Carmen. Inclusive range queries are denoted by square brackets. Exclusive range queries are denoted by curly brackets.</p>
</div>
<div id="boolean-operators" class="section level2">
<h2 class="hasAnchor">
<a href="#boolean-operators" class="anchor"></a>Boolean Operators</h2>
<p>Boolean operators allow terms to be combined through logic operators. Lucene supports AND, “+”, OR, NOT and “-” as Boolean operators(Note: Boolean operators must be ALL CAPS).</p>
<div id="or" class="section level3">
<h3 class="hasAnchor">
<a href="#or" class="anchor"></a>OR</h3>
<p>The OR operator is the default conjunction operator. This means that if there is no Boolean operator between two terms, the OR operator is used. The OR operator links two terms and finds a matching document if either of the terms exist in a document. This is equivalent to a union using sets. The symbol || can be used in place of the word OR.</p>
<p>To search for documents that contain either “jakarta apache” or just “jakarta” use the query:</p>
<pre><code>"jakarta apache" jakarta</code></pre>
<p>or</p>
<pre><code>"jakarta apache" OR jakarta</code></pre>
<p>The AND operator matches documents where both terms exist anywhere in the text of a single document. This is equivalent to an intersection using sets. The symbol &amp;&amp; can be used in place of the word AND. To search for documents that contain “jakarta apache” and “Apache Lucene” use the query:</p>
<p>“jakarta apache” AND “Apache Lucene”</p>
</div>
<div id="section" class="section level3">
<h3 class="hasAnchor">
<a href="#section" class="anchor"></a>+</h3>
<p>The “+” or required operator requires that the term after the “+” symbol exist somewhere in a the field of a single document. To search for documents that must contain “jakarta” and may contain “lucene” use the query:</p>
<pre><code>+jakarta lucene</code></pre>
</div>
<div id="not" class="section level3">
<h3 class="hasAnchor">
<a href="#not" class="anchor"></a>NOT</h3>
<p>The NOT operator excludes documents that contain the term after NOT. This is equivalent to a difference using sets. The symbol ! can be used in place of the word NOT. To search for documents that contain “jakarta apache” but not “Apache Lucene” use the query:</p>
<pre><code>"jakarta apache" NOT "Apache Lucene"</code></pre>
<p>Note: The NOT operator cannot be used with just one term. For example, the following search will return no results:</p>
<pre><code>NOT "jakarta apache"</code></pre>
</div>
<div id="section-1" class="section level3">
<h3 class="hasAnchor">
<a href="#section-1" class="anchor"></a>-</h3>
<p>The “-” or prohibit operator excludes documents that contain the term after the “-” symbol. To search for documents that contain “jakarta apache” but not “Apache Lucene” use the query:</p>
<pre><code>"jakarta apache" -"Apache Lucene"</code></pre>
</div>
</div>
<div id="grouping" class="section level2">
<h2 class="hasAnchor">
<a href="#grouping" class="anchor"></a>Grouping</h2>
<p>Lucene supports using parentheses to group clauses to form sub queries. This can be very useful if you want to control the boolean logic for a query. To search for either “jakarta” or “apache” and “website” use the query:</p>
<pre><code>(jakarta OR apache) AND website</code></pre>
<p>This eliminates any confusion and makes sure you that website must exist and either term jakarta or apache may exist.</p>
<p>Lucene supports using parentheses to group multiple clauses to a single field.</p>
<p>To search for a title that contains both the word “return” and the phrase “pink panther” use the query:</p>
<pre><code>title:(+return +"pink panther")</code></pre>
</div>
<div id="escaping-special-characters" class="section level2">
<h2 class="hasAnchor">
<a href="#escaping-special-characters" class="anchor"></a>Escaping Special Characters</h2>
<p>Lucene supports escaping special characters that are part of the query syntax. The current list special characters are</p>
<pre><code>+ - &amp;&amp; || ! ( ) { } [ ] ^ " ~ * ? : \</code></pre>
<p>To escape these character use the  before the character. For example to search for (1+1):2 use the query:</p>
<pre><code>\(1\+1\)\:2</code></pre>
</div>
</div>
<div id="using-the-raw-api-without-rbioconductor" class="section level1">
<h1 class="hasAnchor">
<a href="#using-the-raw-api-without-rbioconductor" class="anchor"></a>Using the raw API without R/Bioconductor</h1>
<p>The SRAdbV2 is a client to a high-performance web-based API. As such, the web API is perfectly usable from either a simple test page, accessible here:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="kw"><a href="../reference/sra_browse_API.html">sra_browse_API</a></span>()</a></code></pre></div>
<div class="figure">
<img src="images/API.png" alt="The web-based API provides a useful interface for experiment with queries. It also returns URLs associated with the example queries, facilitating querying with other tools like curl or wget."><p class="caption">The web-based API provides a useful interface for experiment with queries. It also returns URLs associated with the example queries, facilitating querying with other tools like <code>curl</code> or <code>wget</code>.</p>
</div>
<p>The API is described using the OpenAPI standard, also known as <a href="https://swagger.io/">Swagger</a>. Tooling exists to quickly scaffold clients in any language (basically) based on the json available here:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1"><span class="kw"><a href="../reference/sra_get_swagger_json_url.html">sra_get_swagger_json_url</a></span>()</a></code></pre></div>
<pre><code>## [1] "https://api-omicidx.cancerdatasci.org/sra/1.0/swagger.json"</code></pre>
</div>
<div id="provenance" class="section level1">
<h1 class="hasAnchor">
<a href="#provenance" class="anchor"></a>Provenance</h1>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1"><span class="kw">sessionInfo</span>()</a></code></pre></div>
<pre><code>## R version 3.5.1 (2018-07-02)
## Platform: x86_64-apple-darwin15.6.0 (64-bit)
## Running under: macOS Sierra 10.12.6
## 
## Matrix products: default
## BLAS: /Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libRblas.0.dylib
## LAPACK: /Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] SRAdbV2_0.7.2   R6_2.3.0        BiocStyle_2.8.2
## 
## loaded via a namespace (and not attached):
##  [1] Rcpp_0.12.19       compiler_3.5.1     pillar_1.3.0      
##  [4] bindr_0.1.1        tools_3.5.1        digest_0.6.18     
##  [7] jsonlite_1.5       lubridate_1.7.4    evaluate_0.12     
## [10] memoise_1.1.0      tibble_1.4.2       pkgconfig_2.0.2   
## [13] rlang_0.3.0.1      cli_1.0.1          commonmark_1.5    
## [16] curl_3.2           yaml_2.2.0         pkgdown_1.1.0.9000
## [19] xfun_0.3           bindrcpp_0.2.2     stringr_1.3.1     
## [22] httr_1.3.1         dplyr_0.7.7        roxygen2_6.1.0    
## [25] xml2_1.2.0         knitr_1.20         desc_1.2.0        
## [28] fs_1.2.6           rprojroot_1.3-2    tidyselect_0.2.5  
## [31] glue_1.3.0         fansi_0.4.0        rmarkdown_1.10    
## [34] bookdown_0.7       purrr_0.2.5        magrittr_1.5      
## [37] backports_1.1.2    htmltools_0.3.6    MASS_7.3-50       
## [40] assertthat_0.2.0   utf8_1.1.4         stringi_1.2.4     
## [43] crayon_1.3.4</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#installation">Installation</a></li>
      <li>
<a href="#usage">Usage</a><ul class="nav nav-pills nav-stacked">
<li><a href="#loading-the-library">Loading the library</a></li>
      <li><a href="#the-omicidx">The Omicidx</a></li>
      <li><a href="#queries">Queries</a></li>
      <li><a href="#fetching-results">Fetching results</a></li>
      </ul>
</li>
      <li>
<a href="#query-syntax">Query syntax</a><ul class="nav nav-pills nav-stacked">
<li><a href="#terms">Terms</a></li>
      <li><a href="#fields">Fields</a></li>
      <li><a href="#wildcard-searches">Wildcard Searches</a></li>
      <li><a href="#fuzzy-searches">Fuzzy Searches</a></li>
      <li><a href="#proximity-searches">Proximity Searches</a></li>
      <li><a href="#range-searches">Range Searches</a></li>
      <li><a href="#boolean-operators">Boolean Operators</a></li>
      <li><a href="#grouping">Grouping</a></li>
      <li><a href="#escaping-special-characters">Escaping Special Characters</a></li>
      </ul>
</li>
      <li><a href="#using-the-raw-api-without-rbioconductor">Using the raw API without R/Bioconductor</a></li>
      <li><a href="#provenance">Provenance</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Sean Davis.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
